name: log_kube
dependencies:
  - name: pipebase
    version: 0.1.1
    modules: ["pipebase::prelude::*"]
  - name: pipekafka
    version: 0.1.1
    modules: ["pipekafka::*"]
  - name: pipekube
    version: 0.1.1
    modules: ["pipekube::*"]
pipes:
  - name: kube_logger
    ty: Listener
    config:
      ty: KubeLogReaderConfig
      path: catalogs/kube_log_reader.yml
    output: 
      ExternalObject: KubeLog
  - name: kafka_json_message
    ty: Mapper
    config:
      ty: KafkaJsonRecordConverterConfig
    output:
      Pair:
        lty: 
          Option:
            ty: String
        rty: UnsignedBytes
    upstreams: [kube_logger]
  - name: kafka_producer
    ty: Exporter
    config:
      ty: KafkaProducerConfig
      path: catalogs/kafka_producer.yml
    upstreams: [kafka_json_message]