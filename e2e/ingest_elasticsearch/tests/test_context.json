[
    {
        "cmd": "curl http://127.0.0.1:8000/v1/health",
        "description": "context server is up",
        "retry": 1
    },
    {
        "cmd": "curl http://127.0.0.1:8000/v1/pipe/ingestion_server",
        "description": "expect ingestion_server succeed",
        "expected_output_file": "e2e/ingest_elasticsearch/tests/context1.txt",
        "retry": 1
    },
    {
        "cmd": "curl http://127.0.0.1:8000/v1/pipe/json",
        "description": "expect json succeed",
        "expected_output_file": "e2e/ingest_elasticsearch/tests/context2.txt",
        "retry": 1
    },
    {
        "cmd": "curl http://127.0.0.1:8000/v1/pipe/text_collector | jq -r '.total_run >= 1'",
        "description": "validate text_collector context total_run",
        "expected_output_file": "e2e/ingest_elasticsearch/tests/context3.txt",
        "retry": 1
    },
    {
        "cmd": "curl http://127.0.0.1:8000/v1/pipe/text_collector | jq -r '.failure_run == 0'",
        "description": "validate text_collector context failure_run",
        "expected_output_file": "e2e/ingest_elasticsearch/tests/context4.txt",
        "retry": 1
    },
    {
        "cmd": "curl http://127.0.0.1:8000/v1/pipe/reqwest_poster | jq -r '.total_run >= 1'",
        "description": "validate reqwest_poster context total_run",
        "expected_output_file": "e2e/ingest_elasticsearch/tests/context5.txt",
        "retry": 1
    },
    {
        "cmd": "curl http://127.0.0.1:8000/v1/pipe/reqwest_poster | jq -r '.failure_run == 0'",
        "description": "validate reqwest_poster context failure_run",
        "expected_output_file": "e2e/ingest_elasticsearch/tests/context6.txt",
        "retry": 1
    }
]