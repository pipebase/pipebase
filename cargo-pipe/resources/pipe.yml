name: print_timer_tick
dependencies:
  - package: pipebase
    path: ../../../pipebase
    modules: ["pipebase::*"]
pipes:
  - name: timer1
    ty: Poller
    config:
      ty: TimerConfig
      path: catalogs/timer.yml
    output:
      data_ty: UnsignedLongLong
  - name: timer2
    ty: Poller
    config:
      ty: TimerConfig
      path: catalogs/timer.yml
    output:
      data_ty: UnsignedLongLong
  - name: printer
    ty: Exporter
    config:
      ty: PrinterConfig
    upstreams: [ "timer1", "timer2" ]
objects:
  - ty: Bar
    fields:
      - name: bar1
        data_ty: Integer
      - name: bar2
        data_ty: String
  - ty: ProjectedBar
    metas:
      - derives: [Clone, Debug, Project]
      - project: 
          input: Bar
    fields:
      - name: bar1
        data_ty: Integer
        metas:
          - project:
              from: bar1
      - name: bar2
        data_ty: String
        metas:
          - project:
              expr: "b.bar2.to_owned()"
              alias: "b"
cstores:
  - name: "context_printer"
    config:
      ty: "ContextPrinterConfig"
      path: "catalogs/context_printer.yml"
